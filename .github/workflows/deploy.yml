      - name: Upload hf-space folder to Hugging Face Space
        env:
          HF_TOKEN: ${{ secrets.HUGGINGPUP }}
          HUGGINGFACE_HUB_TOKEN: ${{ secrets.HUGGINGPUP }}
        run: |
          python - << 'PY'
          import os
          from huggingface_hub import HfApi

          token = os.environ.get("HF_TOKEN") or os.environ.get("HUGGINGFACE_HUB_TOKEN")
          assert token, "HF_TOKEN/HUGGINGFACE_HUB_TOKEN is not set in env"

          api = HfApi(token=token)

          # Debug: see which HF user this token belongs to
          print("WHOAMI:", api.whoami())

          repo_id = "AlbertoRoca96-web/pup-sdk"
          local_dir = "hf-space"

          commit_info = api.upload_folder(
              repo_id=repo_id,
              repo_type="space",
              folder_path=local_dir,
              commit_message="Pup SDK auto-deploy from GitHub Actions",
              create_pr=True,  # ðŸ‘ˆ IMPORTANT: use PR instead of direct commit
          )
          print("Upload result:", commit_info)
          PY
